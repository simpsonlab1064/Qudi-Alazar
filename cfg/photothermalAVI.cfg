global:
    startup_modules: [alazar_photothermal_avi_control_gui, alazar_image_gui, alazar_channel_control_gui]

    remote_modules_server:
        address: 'localhost'
        port: 12345

    namespace_server_port: 18861
    force_remote_calls_by_value: True
    stylesheet: 'qdark.qss'
    daily_data_dirs: True

gui:
    alazar_channel_control_gui:
        module.Class: 'control.alazar_channel_control_gui.AlazarChannelGui'
        connect:
            alazar_logic: photothermal_avi_logic

    alazar_image_gui:
        module.Class: 'display.alazar_image_gui.AlazarImageGui'
        connect:
            alazar_logic: photothermal_avi_logic   # value = module name above

    alazar_plot_gui:
        module.Class: 'display.alazar_plot_gui.AlazarPlotGui'
        connect:
            alazar_logic: photothermal_avi_logic

    alazar_photothermal_avi_control_gui:
        module.Class: 'control.alazar_photothermal_avi_control_gui.AlazarPhotothermalAVIControlGui'
        connect:
            photothermal_avi_logic: photothermal_avi_logic

logic:
    photothermal_avi_logic:
        module.Class: 'photothermal_avi_logic.PhotothermalAVILogic'
        connect:
            alazar: alazar
            galvos: galvos
        options:
            num_buffers: 0
            min_mod: 1e-9
            view_at_end: True
            live_viewing_fn: 'photothermal_avi'
            fast_motion_period_us: 8000.0
            fast_motion_phase: 0.0
            samples_per_pixel: 2
            pixel_phase: 0
            row_phase_step: 1

hardware:
    alazar_dummy:
        module.Class: 'alazar.alazar_dummy.AlazarDummy'

    alazar:
        module.Class: 'alazar.alazar_card.AlazarCard'
        options:
            systemId: 1
            clock: 2
            sample_rate: 64_000
            slow_ext_rate_zero: true
            adma_external_startcapture: True
            dma_wait_timeout_ms: 20000
            trigger_timeout: 0
            card_type: "c9440"
            trigger_level: 32
            aux1_mode: 'trigger'
            aux1_pulse_ms: 50
            ext_trigger_input: 'ttl'
            ext_trigger_slope: 'pos'

    galvos:
        module.Class: 'photothermal_avi_galvos.GalvoStage'
        options:
            protocol: 'ggv1'
            clock: 125
            enable_polarity: 1
            wave_f_mode: 1
            slow_wave_enable_mode: true
            fast_v_max: 10
            fast_v_min: 2
            slow_v_max: 10
            slow_v_min: 2
            com: 'COM3'
            baud: 9600
